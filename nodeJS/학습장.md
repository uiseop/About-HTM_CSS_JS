04. Express - Middleware
# 미들웨어란?
👉 router 를 사용하면서 잠깐 미들웨어란 말을 들어보았을 겁니다. 이 미들웨어란 무엇일까요? 먼저 예를 하나
들어보겠습니다. 우리가 매 route 를 생성할 때마다 만약에 공통된 처리를 하고 싶은 경우를 생각해볼게요. 요청이 들어올
때마다 이 요청이 어떤 유저의 요청인지 인증검사를 해야할 수 있어요. 그런 경우에 코드를 작성하게 되면 route 를 하나
만들 때마다 매번 유저 인증을 확인하는 코드를 넣어야 할 것입니다. 이런 반복되는 작업들, 혹은 우리가 정의한 route에
오기 전에 중간에서 미리 처리해야할 것들을 정의해둔 것을 미들웨어라고 합니다.

app.use((req, res, next) => {
console.log(req);
next();
});
app.get('/', (req, res, next) => {
res.send('Welcome Home');
});
const express = require('express');
const app = express();
app.use((req, res, next) => {
console.log(req);
next();
});
app.get('/', (req, res, next) => {
res.send('Welcome Home');
});
app.listen(3000);
이런 예시코드를 한번 보겠습니다. 중간에 app.use 라고 하는 것이 미들웨어를 쓰겠다고 하는 부분입니다. 저 코드를 사용하면 어
떤 요청이 들어오던간에 req 를 로그로 찍고 나서 실제 route 로 전달되게 됩니다.

이런식으로 들어온 요청은 우리가 설정한 미들웨어를 통과하고 중간에 응답을 해서 종료가 되거나 아니면 다음 미들웨어가 있는
경우에는 다음 미들웨어로 넘어갑니다.
# 데이터 가공 용도 express.json() express.urlencoded()
👉 나중에 배우겠지만 우리는 웹서버에 요청할 때 단순히 url 외에 추가적인 정보를 전달 할 수 있습니다. POST 메서드의
body 정보가 그것인데요. 이것을 express 에서 사용하려면 복잡한 절차가 필요합니다. 이 데이터를 바로 사용하기 쉽게
가공해주는 미들웨어가 바로 이 express.json() 입니다.
index.js 파일 수정
app.use(express.urlencoded({extended: false}))
app.use(express.json())
이렇게 코드를 추가하면 미들웨어를 쓸 준비는 다 완성된 것입니다.
Express의 기본 제공 미들웨어 - static
👉 Express 애플리케이션의 정적 자산을 제공하는 역할을 하는 static 입니다. 이것을 이용하면 우리의 express 에서도 이
제 이쁜 이미지, 신나는 동영상 같은 정적 파일을 제공할 수 있습니다. 사용법은 간단합니다.
app.use(express.static('public'));

# MongoDB사용

npm install mongoose 해서 mogoDB 사용을 위한 토대 마련
```
<!-- mongoose를 사용 -->
const mongoose = require('mongoose');

app.get('/mongodb', async (req, res) => {
    <!-- 데이터베이스의 이름 -->
    await mongoose.connect('mongodb://localhost/voyage', {
        useNewUrlParser: true,
        useUnifiedTopology: true,
        useFindAndModify: true,
        useCreateIndex: true
    });
<!-- 화면에 뜨는 부분 -->
		res.send('ok');
        <!-- Schema를 통해 모델을 생성함 -->
})
```

# insomnia를 통해 GET,POST,DELETE,UPDATE CRUD통신(=Possman이랑 같음)

updateOne 함수는??
find 함수는??
